<!doctype html>
<html lang="en-us">
<head>
  <meta charset="utf-8">
  <title>TMAPI</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <script src="../dist/ticketmaster-client-1.0.0.min.js"></script>
  <script>
    (function(TMAPI) {
      function logPage(page, triggerNext = true) {
        console.log(page.page.number, page.items.map((item) => item.name))

        if (triggerNext) {
          return page.getNext()
        }
      }

      const sdk = TMAPI.default('pTAf3X1DA6XCHjaQaw0WmlgcA0j1r32C')

      sdk.discovery.v2.event.all({page: 4, size: 5, city: 'Los Angeles'})
        .then(logPage)
        .then(logPage)
        .then(function(page) {
          logPage(page)
        })

    })(TMAPI)
  </script>
</body>
</html>
